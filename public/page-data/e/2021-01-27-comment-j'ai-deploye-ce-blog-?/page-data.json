{"componentChunkName":"component---src-templates-blog-post-js","path":"/e/2021-01-27-comment-j'ai-deploye-ce-blog-?","result":{"data":{"site":{"siteMetadata":{"title":null}},"markdownRemark":{"id":"c257ff7c-f124-56f2-bd17-34a0c09ce607","excerpt":"Gatsby, un générateur de site statique Organiser le contenu sur Gitlab Déployement sur Netlify en utilisant Gitlab CI L’URL CreateFIlePath permet d’avoir le…","html":"<h2>Gatsby, un générateur de site statique</h2>\n<h2>Organiser le contenu sur Gitlab</h2>\n<h2>Déployement sur Netlify en utilisant Gitlab CI</h2>\n<h2>L’URL</h2>\n<p>CreateFIlePath permet d’avoir le chemin d’accès du fichier Markdown.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">exports.onCreateNode <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> node, actions, getNode <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n  const <span class=\"token punctuation\">{</span> createNodeField <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> actions\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>node.internal.type <span class=\"token operator\">==</span><span class=\"token operator\">=</span> <span class=\"token variable\"><span class=\"token variable\">`</span>MarkdownRemark<span class=\"token variable\">`</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    const value <span class=\"token operator\">=</span> createFilePath<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> node, getNode<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n    createNodeField<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      name: <span class=\"token variable\"><span class=\"token variable\">`</span>slug<span class=\"token variable\">`</span></span>,\n      node,\n      value,\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">exports<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">onCreateNode</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> node<span class=\"token punctuation\">,</span> actions<span class=\"token punctuation\">,</span> getNode <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> createNodeField <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> actions\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">.</span>internal<span class=\"token punctuation\">.</span>type <span class=\"token operator\">===</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">MarkdownRemark</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> prefix <span class=\"token operator\">=</span> <span class=\"token function\">createFilePath</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> node<span class=\"token punctuation\">,</span> getNode<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">substring</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">17</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> slug <span class=\"token operator\">=</span> <span class=\"token function\">createFilePath</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> node<span class=\"token punctuation\">,</span> getNode<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span>prefix<span class=\"token punctuation\">,</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token function\">createNodeField</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      name<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">slug</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n      node<span class=\"token punctuation\">,</span>\n      value<span class=\"token operator\">:</span> slug<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2>Problème</h2>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">ENOSPC: System limit for number of file watchers reached, watch &#39;/home/xing/Projects/dev/personal/gitlab/personal-blog/content/life-posts/2021/2021-01-04-mon-bilan-2020/images&#39;\n\necho fs.inotify.max_user_watches=524288 | sudo tee -a /etc/sysctl.conf &amp;&amp; sudo sysctl -p</code></pre></div>\n<p>Source : <a href=\"https://github.com/gatsbyjs/gatsby/issues/11406\">Github Issues</a></p>\n<h2>Références</h2>\n<p><a href=\"https://medium.com/js-dojo/deploying-vue-js-to-netlify-using-gitlab-continuous-integration-pipeline-1529a2bbf170\">Deploying a Vue.js app to Netlify using GitLab’s CI/CD pipeline</a></p>","frontmatter":{"title":"Comment j'ai déployé ce blog ?","date":"mercredi 27 janvier 2021","description":null},"fields":{"slug":"e/2021-01-27-comment-j'ai-deploye-ce-blog-?"}},"previous":{"fields":{"slug":"2021-01-24-shingeki-no-kyojin-saison-4-episode-7"},"frontmatter":{"title":"Shingeki no Kyojin saison 4 épisode 7 (Spoiler)"}},"next":{"fields":{"slug":"2021-01-27-elle,-c'est-ma-deesse"},"frontmatter":{"title":"Elle, c'est ma déesse"}}},"pageContext":{"id":"c257ff7c-f124-56f2-bd17-34a0c09ce607","previousPostId":"4e43c5ae-346d-54aa-88e0-48308849aeef","nextPostId":"6e95bc87-1157-5795-932d-d53a2b66e775"}},"staticQueryHashes":["2841359383","4196562498"]}